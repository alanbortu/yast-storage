@HEADER-COMMENT@

@HEADER@
Group:	System/YaST
License: GPL v2 or later
BuildRequires:	blocxx-devel boost-devel gcc-c++ libxcrypt-devel openssl-devel sablot swig
BuildRequires:	docbook-xsl-stylesheets doxygen libxslt perl-XML-Writer sgml-skel update-desktop-files
BuildRequires:	libstorage-devel >= 2.19.5 yast2 >= 2.18.19 yast2-core-devel >= 2.18.1 yast2-devtools
BuildRequires:	yast2-testsuite >= 2.19.0 yast2-perl-bindings
Requires:	libstorage = %(echo `rpm -q --queryformat '%{VERSION}' libstorage`)
Requires:	yast2-perl-bindings yast2-core >= 2.18.3 yast2 >= 2.18.19 yast2-libyui >= 2.18.7
Requires:	yast2-dbus-client
%ifarch s390 s390x
Requires:	yast2-s390
%endif
PreReq:		%fillup_prereq
Provides:	y2a_fdsk yast2-config-disk
Obsoletes:	y2a_fdsk yast2-config-disk
Provides:	yast2-agent-fdisk yast2-agent-fdisk-devel
Obsoletes:	yast2-agent-fdisk yast2-agent-fdisk-devel
Provides:	yast2-trans-inst-partitioning
Obsoletes:	yast2-trans-inst-partitioning
Provides:	y2t_inst-partitioning
Obsoletes:	y2t_inst-partitioning
Summary:	YaST2 - Storage Configuration

%description
This package contains the files for YaST2 that handle access to disk
devices during installation and on an installed system.

@PREP@

@BUILD@

@INSTALL@
rm -f $RPM_BUILD_ROOT/@plugindir@/libpy2StorageCallbacks.la
rm -f $RPM_BUILD_ROOT/@plugindir@/libpy2StorageCallbacks.so

@CLEAN@

%post
%{fillup_only -an storage}

%files
%defattr(-,root,root)

# storage
%dir @yncludedir@/partitioning
@yncludedir@/partitioning/*.ycp
@clientdir@/inst_custom_part.ycp
@clientdir@/inst_resize_ui.ycp
@clientdir@/inst_resize_dialog.ycp
@clientdir@/inst_disk.ycp
@clientdir@/inst_target_part.ycp
@clientdir@/inst_disk_proposal.ycp
@clientdir@/inst_target_selection.ycp
@clientdir@/inst_prepdisk.ycp
@clientdir@/storage_finish.ycp
@clientdir@/partitions_proposal.ycp
@clientdir@/storage.ycp
@clientdir@/disk.ycp
@clientdir@/disk_worker.ycp
@clientdir@/multipath-simple.ycp
@moduledir@/*
@fillupdir@/sysconfig.storage-yast2-storage

%dir @ydatadir@
@ydatadir@/*.ycp

%doc %dir @docdir@
%doc @docdir@/README*
%doc @docdir@/COPY*

# agents-scr
@scrconfdir@/*.scr

# libstorage ycp callbacks
@plugindir@/libpy2StorageCallbacks.so.*

# disk
%dir @desktopdir@
@desktopdir@/disk.desktop

# scripts
@ybindir@/check.boot

# perl bindings of libstorage
%{perl_vendorarch}/LibStorage.so

%package devel
Requires:	libstorage-devel = %(echo `rpm -q --queryformat '%{VERSION}' libstorage-devel`)
Requires:       blocxx-devel libstdc++-devel yast2-storage = %version
Summary:        YaST2 - Storage Library Headers and Documentation
Group:          Development/Libraries/YaST

%description devel
This package contains the files for YaST2 that are needed of one wants
to develop a program using libstorage.

%files devel
%defattr(-,root,root)
%doc @docdir@/autodocs
%doc @docdir@/config.xml.description
