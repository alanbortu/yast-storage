/**
 * File:
 *   lvm_ui_dialogs.ycp
 *
 * Module: 
 *    configuration of lvm: lib for the user interface
 *    - contains only dialogs    
 *
 * Summary:
 *
 * Authors:
 *   mike <mike@suse.de>
 *
 *
 * $Id$
 *
 */


{

textdomain "storage";

import "Mode";
import "Partitions";
import "FileSystems";
import "Storage";

import "Label";
import "Popup";

include "partitioning/custom_part_dialogs.ycp";
include "partitioning/custom_part_lib.ycp";
include "partitioning/lvm_lv_lib.ycp";


define boolean HandleRemoveLv( map<string,map> targetMap, string id )
    ``{
    boolean ret = false;
    map disk = Storage::GetDisk( targetMap, id );
    map Lv = Storage::GetPartition( targetMap, id );
    if( size(Lv)==0 || Lv==nil || Lv["type"]:`primary!=`lvm )
	{
	// Popup text
	Popup::Error(_("You can only remove logical volumes."));
	}
    else
	{
	// Popup text
	string message = sformat( _("Remove the logical volume %1?"), id );

	if( Popup::YesNo( message ))
	    {
	    ret = Storage::DeleteDevice(disk["device"]:"", id);
	    }
	}
    y2milestone( "HandleRemoveLv ret:%1", ret );
    return( ret );
    }


}
