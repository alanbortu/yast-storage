/**
 * File:
 *  
 *  testcase for partition proposal
 *
 * Authors:
 *   Michael Hager <mike@suse.de>
 *
 * $Id$
 *
 * 
 */

{

// sample target map used for testing


////////////////////////////////////////////////////////////////////////////////  
//                           TESTCASES
////////////////////////////////////////////////////////////////////////////////  
   
   map test_winonly = $[
  "/dev/hdc":
	$[
	  "bus" : "IDE", "cyl_count" : 53040, "cyl_size" : 516096,
	  "device" : "/dev/hdc", "name" : "3. IDE, 25.49 GB, /dev/hdc, (windows full)",
	  "partitions" : [
	    $["fsid" : 12, "fstype" : "FAT32",
	      "nr" : 1, "region" : [0, 23040 ], "type" : `primary
	    ],
	    $[
	      "fsid" : 15,
	      "fstype" : "Extended",
	      "nr" : 2,
	      "region" : [
			  23040,
			  30000
	      ],
	      "type" : `extended,
	    ],
	    $["fsid" : 12, "fstype" : "FAT32",
	      "nr" : 5, "region" : [23040,30000 ], "type" : `logical
	      ]
	  ],
	  "vendor" : "WDC"
	]
   ];

   map test_4winonly = $[
  "/dev/hdd":
	$[
	  "bus" : "IDE", "cyl_count" : 53040, "cyl_size" : 516096,
	  "device" : "/dev/hdc", "name" : "4. IDE, 25.49 GB, /dev/hdd, (full)",
	  "partitions" : [
	    $["fsid" : 4, "fstype" : "FAT16",
	      "nr" : 1, "region" : [ 0, 513 ], "type" : `primary
	      ],
	    $["fsid" : 4, "fstype" : "FAT16",
	      "nr" : 2, "region" : [ 513, 513 ], "type" : `primary
	      ],
	    $["fsid" : 4, "fstype" : "FAT16",
	      "nr" : 3, "region" : [ 1026, 513 ], "type" : `primary
	      ],
	    $["fsid" : 4, "fstype" : "FAT16",
	      "nr" : 4, "region" : [ 1539, 51500 ], "type" : `primary
	      ]
	  ],
	  "vendor" : "WDC"
	]
   ];

   
  

   textdomain "storage";

   import "Arch";
   import "Storage";

   // map targetMap = test_free_space;
   map targetMap = test_winonly;
   Storage::SetTargetMap( targetMap );
   Mode::test () = true;

   ///////////////////////////////////////////////////////////////////////////
   ///////////////////////////////////////////////////////////////////////////
   // SIMULATE OLD SYSTEM WITHOUT LBA SUPPORT
   ///////////////////////////////////////////////////////////////////////////
   ///////////////////////////////////////////////////////////////////////////

   Storage::SetTestsuite( true );

   import "BootLILO";
   BootLILO::lba_support = true;

   include "partitioning/do_proposal.ycp";

   map ret = Storage::GetTargetMap();
   Storage::SetTargetMap( targetMap );
   ret = do_proposal();

}   
