/**
 * File:
 *  
 *  testcase for partition proposal
 *
 * Authors:
 *   Michael Hager <mike@suse.de>
 *
 * $Id$
 *
 * 
 */

{

// sample target map used for testing

   map test_map = $[
      "/dev/hde" : $[
		"bus" : "IDE",
		"cyl_count" : 2491,
		"cyl_size" : 8224768,
		"max_primary" : 4,
		"model" : "Maxtor 52049H3",
		"name" : "1. IDE, 19.08 GB, /dev/hde, Maxtor 52049H3",
		"partitions" : [
		      $[
			"fsid" : 11,
			"fstype" : "Win95 FAT32",
			"nr" : 1,
			"region" : [
			  0,
			  382
			],
			"type" : `primary
		      ],
		      $[
			"fsid" : 130,
			"fstype" : "Linux swap",
			"nr" : 2,
			"region" : [
			  382,
			  48
			],
			"type" : `primary
		      ],
		      $[
			"fsid" : 131,
			"fstype" : "Linux native",
			"nr" : 3,
			"region" : [
			  430,
			  471
			],
			"type" : `primary,
			"used_fs" : `reiser
		      ]
		    ],
		"scrpath" : .hde
		]
    ];

   textdomain "partitioning";

   import "Arch";
   import "Storage";

   map targetMap = test_map;
   Storage::SetTargetMap( targetMap );
   Mode::test = true;

   ///////////////////////////////////////////////////////////////////////////
   ///////////////////////////////////////////////////////////////////////////
   // SIMULATE OLD SYSTEM WITHOUT LBA SUPPORT
   ///////////////////////////////////////////////////////////////////////////
   ///////////////////////////////////////////////////////////////////////////

   Storage::SetTestsuite( true );

   import "BootLILO";
   BootLILO::lba_support = false;

   include "partitioning/do_proposal.ycp";

   map ret = Storage::GetTargetMap();
   Storage::SetTargetMap( targetMap );
   ret = do_proposal();

}   
