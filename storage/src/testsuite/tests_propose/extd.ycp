/**
 * File:
 *  
 *  testcase for partition proposal
 *
 * Authors:
 *   Michael Hager <mike@suse.de>
 *
 * $Id$
 *
 * 
 */

{

// sample target map used for testing


////////////////////////////////////////////////////////////////////////////////  
//                           TESTCASES
////////////////////////////////////////////////////////////////////////////////  
   
   map test_4winonly = $[
  "/dev/hdd":
	$[
	  "bus" : "IDE", "cyl_count" : 5000, "cyl_size" : 1000000,
	  "device" : "/dev/hdc", "name" : "4. IDE, 25.49 GB, /dev/hdd, (full)",
	  "partitions" : [
	    $["fsid" : 12, "fstype" : "DOS",
	      "nr" : 1, "region" : [ 0, 800 ], "type" : `primary
	      ],
	    $["fsid" : 15, "fstype" : "Swap",
	      "nr" : 2, "region" : [ 800, 4200 ], "type" : `extended
	      ],
	    $["fsid" : 131, "fstype" : "Linux",
	      "nr" : 5, "region" : [ 800, 400 ], "type" : `logical
	    ],
	    $["fsid" : 131, "fstype" : "Linux",
	      "nr" : 6, "region" : [ 1200, 800 ], "type" : `logical
	    ],
	    $["fsid" : 12, "fstype" : "Linux",
	      "nr" : 7, "region" : [ 2000, 3000 ], "type" : `logical
	      ]
	  ],
	  "vendor" : "WDC"
	]
   ];

   
  

   textdomain "partitioning";

   import "Arch";
   import "Storage";

   // map targetMap = test_free_space;
   map targetMap = test_4winonly;
   Storage::SetTargetMap( targetMap );
   Mode::test = true;

   ///////////////////////////////////////////////////////////////////////////
   ///////////////////////////////////////////////////////////////////////////
   // SIMULATE OLD SYSTEM WITHOUT LBA SUPPORT
   ///////////////////////////////////////////////////////////////////////////
   ///////////////////////////////////////////////////////////////////////////

   Storage::SetTestsuite( true );

   import "BootLILO";
   BootLILO::lba_support = true;

   include "partitioning/do_proposal.ycp";

   map ret = Storage::GetTargetMap();
   Storage::SetTargetMap( targetMap );
   ret = do_proposal();

}   
