{
    import "Storage";
    import "StorageProposal";

    Storage::InitLibstorage(false);

    StorageProposal::GetControlCfg();

    map<string, map> target_map = Storage::GetTargetMap();
    map<string, any> prop = StorageProposal::get_inst_prop(target_map);

    if (prop["ok"]:false)
    {
	Storage::SetTargetMap(prop["target"]:$[]);

	list<map> infos = Storage::GetCommitInfos();

	Testsuite::Dump("Proposal:");
	foreach(map info, infos, {
	    string text = info[`text]:"";
	    if (info[`destructive]:false)
		text = text + " [destructive]";
	    Testsuite::Dump(text);
	});
    }
    else
    {
	Testsuite::Dump("No proposal.");
    }

    Storage::FinishLibstorage();
}
